<html>
    <head>
        <title>GameOfLife</title>

        <!-- JQuery -->
        <script src="https://code.jquery.com/jquery-3.3.1.min.js" integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8=" crossorigin="anonymous"></script>

        <!-- Bootstrap --> 
        <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css" integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm" crossorigin="anonymous">
    </head>
    <body>
        <nav class="navbar navbar-light bg-light">
            <span class="navbar-brand mb-0 h1">Game of Life</span>

            <button id="startGame" class="btn"><span>Start the Game</span></button>
        </nav>

        <div id="game" class="container">
            
        </div>
    </body>
    <script type="text/javascript">
        var game = null;
		var isRunning = false;
		var matrix = null;
		var transition_matrix = null;
		
		var x = 10;
		var y = 10;
        
		
		function matrixGenerate(x,y){
            matrix = new Array(x);
            for(i = 0;i < x; i++){
                matrix[i] = new Array(y);
                for(j = 0;j < y;j++){
                    matrix[i][j] = {"isLive":false};
                }
            }
            return matrix;
        }

        function setGameTable(matrix){
            $("#game").html("");
			for(i = 0;i < x;i++){
				for(j = 0;j < y;j++){
					if(matrix[i][j].isLive){
						status = "live";
					}else{
						status = "dead";
					}
					$("#game").append("<div class=\"cell "+status+"-cell\" data-x=\""+i+"\" data-y=\""+j+"\"></div>");
				}
				$("#game").append("<div id=\"row\">");	
			}
        }
		
        function runGame(){
			game = setInterval(function(){
				transition_matrix = matrix;
                matrix.forEach(row => {
                    row.forEach( cell => { 
                        new_state = false;
                    });
                });
				matrix = transition_matrix;
				setGameTable(transition_matrix);
            },1000);
        }
		

        $(document).ready(function(){
			matrix = matrixGenerate(x,y);
            setGameTable(matrix);

            $(".cell").on("click",function(){
                if(!isRunning){
                    a = $(this).data('x');
                    b = $(this).data('y');
                    
                    matrix[a][b].isLive = !matrix[a][b].isLive;
                    
                    if(matrix[x][y].isLive){
                        $(this).removeClass('dead-cell');
                        $(this).addClass('live-cell');
                    }else{
                        $(this).removeClass('live-cell');
                        $(this).addClass('dead-cell');
                    }

                }
            });
            
            

            $('#startGame').on("click",function(){
                isRunning = !isRunning;
                if(isRunning){
                    $(this).html("Stop the Game");
					console.log(matrix);
					runGame();
					
                }else{
                    $(this).html("Start the Game");     
                    setGameTable(matrix); 
                    clearInterval(game);          
                }
               
            });
        });

    </script>

    <style type="text/css">
    .cell {
        display: inline-block;
        border: 1px solid grey;
        
        width: 20px;
        height: 20px;
    }

    .dead-cell {
        color: white;
        background: white;
    }

    .live-cell {
        color: black;
        background: black;
    }
    </style>
</html>